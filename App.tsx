import React, { useState, useCallback } from 'react';
import type { AppStatus, MushroomIdentification } from './types';
import { identifyMushroom } from './services/geminiService';
import { ImageUploader } from './components/ImageUploader';
import { ResultCard } from './components/ResultCard';
import { Loader } from './components/Loader';

const App: React.FC = () => {
  const [status, setStatus] = useState<AppStatus>('idle');
  const [imageFile, setImageFile] = useState<File | null>(null);
  const [imagePreviewUrl, setImagePreviewUrl] = useState<string | null>(null);
  const [result, setResult] = useState<MushroomIdentification | null>(null);
  const [error, setError] = useState<string | null>(null);

  const handleImageSelect = (file: File) => {
    setImageFile(file);
    setImagePreviewUrl(URL.createObjectURL(file));
    setStatus('preview');
    setError(null);
    setResult(null);
  };

  const handleIdentify = useCallback(async () => {
    if (!imageFile) return;

    setStatus('loading');
    setError(null);
    try {
      const identificationResult = await identifyMushroom(imageFile);
      setResult(identificationResult);
      setStatus('success');
    } catch (err: unknown) {
      setError(err instanceof Error ? err.message : 'An unknown error occurred.');
      setStatus('error');
    }
  }, [imageFile]);

  const handleReset = () => {
    setStatus('idle');
    setImageFile(null);
    setImagePreviewUrl(null);
    setResult(null);
    setError(null);
  };

  return (
    <div className="min-h-screen flex flex-col items-center justify-center p-4 font-sans text-slate-300">
      <main className="w-full max-w-2xl mx-auto">
        <header className="text-center mb-8 animate-fade-in">
          <div className="flex justify-center items-center gap-4 text-cyan-300">
            <img 
              src="data:image/png;base64,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"
              alt="MycoLens Logo" 
              className="w-12 h-12" 
            />
            <h1 className="text-5xl md:text-6xl font-bold tracking-tight text-shadow-[0_0_10px_rgba(0,255,255,0.5)]">MycoLens</h1>
          </div>
          <p className="text-slate-400 mt-2 font-semibold">Free Mushroom Identification Tool</p>
        </header>

        <div className="bg-slate-900/50 backdrop-blur-md border border-cyan-400/30 rounded-2xl shadow-2xl shadow-cyan-500/20 transition-all duration-300 min-h-[30rem] flex flex-col justify-center">
          {status === 'idle' && <ImageUploader onImageSelect={handleImageSelect} />}
          
          {status === 'preview' && imagePreviewUrl && (
            <div className="text-center flex flex-col items-center gap-4 p-6">
              <img src={imagePreviewUrl} alt="Mushroom preview" className="max-h-80 w-auto rounded-xl object-cover shadow-lg shadow-black/50" />
              <div className="flex items-center gap-4 mt-4">
                <button onClick={handleReset} className="px-6 py-2 text-slate-300 bg-slate-700/50 border border-slate-500 hover:bg-slate-600/50 hover:border-slate-400 rounded-full font-semibold transition-all">
                  Change Photo
                </button>
                <button onClick={handleIdentify} className="px-8 py-3 bg-cyan-500 text-slate-900 rounded-full font-bold hover:bg-cyan-400 transition-all shadow-lg shadow-cyan-500/20">
                  Identify Mushroom
                </button>
              </div>
            </div>
          )}

          {status === 'loading' && <Loader />}

          {status === 'success' && result && imagePreviewUrl && (
            <ResultCard result={result} imagePreviewUrl={imagePreviewUrl} onReset={handleReset} />
          )}

          {status === 'error' && (
            <div className="text-center flex flex-col items-center gap-4 p-6 text-red-400">
              <h3 className="font-bold text-xl text-shadow-[0_0_8px_rgba(255,0,0,0.5)]">Identification Failed</h3>
              <p className="max-w-md">{error}</p>
              <button onClick={handleReset} className="mt-4 px-6 py-2 bg-red-500/20 border border-red-500/50 text-red-300 hover:bg-red-500/30 hover:border-red-500 rounded-full font-semibold transition-colors">
                Try Again
              </button>
            </div>
          )}
        </div>

        <footer className="text-center mt-8 text-sm text-slate-500">
          <p>This tool is for educational purposes only. Do not consume any mushroom based on this app's identification.</p>
          <p className="mt-2 text-slate-600">provided by <span className="font-semibold text-slate-500">Spore n' Sprout</span></p>
        </footer>
      </main>
    </div>
  );
};

export default App;